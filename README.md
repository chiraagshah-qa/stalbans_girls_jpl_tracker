# GotSport Tracker

A React Native (Expo) app for tracking football scores, league table, and fixtures from [GotSport](https://system.gotsport.com). Built for St Albans City FC Academy supporters (U14/U16).

**Version:** 1.1.0  
**Note:** This app is a personal hobby project and is not official.

## Features

- **Home** – League position, last result, next fixture, today’s and upcoming fixtures
- **Table** – Full league table (P, W, D, L, GF, GA, GD, PTS) with team crests
- **Results** – Recent results with opponent crests
- **Fixtures** – Fixtures for the next 15 days with home/away crests and scores
- **Settings** – Choose your team from the club’s list (loaded from GotSport); selection and data are cached locally

Team list is loaded from the GotSport clubs page for the event. Club crests are loaded from schedule/results pages and cached; none are bundled in the app. Errors are shown only after a short delay so brief loading states don’t flash as failures.

Theme: St Albans yellow (`#FFD700`) and dark blue (`#0a2463`).

## Tech stack

- **Expo** ~52, **React Native** 0.76, **Expo Router** (file-based tabs)
- **AsyncStorage** for cache (standings, results, fixtures, team list, group IDs, crest URLs) and selected team
- Data and crest images from GotSport via client-side requests (no official API)

## Prerequisites

- Node.js 18+
- npm or yarn
- For local Android: JDK 17 and Android SDK  
- For iOS: Xcode (macOS)  
- For builds: [Expo account](https://expo.dev) (EAS Build)

## Setup

```bash
# Install dependencies
npm install

# Start dev server
npm start
```

Then open **Android** or **iOS** from the terminal, or scan the QR code with Expo Go.

- **Android device/emulator:** `npm run android`
- **iOS simulator:** `npm run ios`

## Scripts

| Command                | Description                                             |
|------------------------|---------------------------------------------------------|
| `npm start`            | Start Expo dev server (Metro)                          |
| `npm run android`      | Run locally on Android emulator/device (native build)  |
| `npm run ios`          | Run locally on iOS simulator/device (native build)     |
| `npm run web`          | Run in browser                                         |
| `npm test`             | Run unit tests                                         |
| `npm run build`        | Run tests, then interactive EAS build (choose target)  |
| `npm run build:apk`    | EAS Android **APK** build (preview profile, device)    |
| `npm run build:ios`    | EAS iOS **simulator** build (preview profile)          |
| `npm run build:ios:device` | EAS iOS **device** build (preview-device profile)  |
| `npm run build:ios:prod`   | EAS iOS **production** build (App Store/TestFlight)|

## Building with EAS

### Android (APK)

1. Log in: `npx eas login`
2. Build: `npm run build:apk` (or `npx eas build --platform android --profile preview`)
3. Download the APK from the link in the terminal or from [expo.dev](https://expo.dev) → your project → **Builds**

The **preview** profile produces an APK for direct install on devices. Use the **production** profile for an AAB for the Play Store.

### iOS (simulator)

- Build: `npm run build:ios` (or `npx eas build --platform ios --profile preview`)  
- This produces an iOS **simulator** build that you can install in Xcode’s Simulator on macOS.

### iOS (device / TestFlight)

- **Device preview build:** `npm run build:ios:device` (profile `preview-device`)  
- **Production / TestFlight:** `npm run build:ios:prod` (profile `production`)

To install on real devices or submit to the App Store/TestFlight you need a **paid Apple Developer account** so EAS can create and use the necessary certificates and provisioning profiles.

## CI / GitHub Actions

- **Tests** (`.github/workflows/tests.yml`): runs unit tests on every push and PR.
- **EAS Build** (`.github/workflows/build.yml`): runs when the Tests workflow succeeds on **push to `main` or `master`**, and triggers EAS builds for **iOS and Android** (preview profile).

To enable EAS builds in CI:

1. Create an [Expo access token](https://expo.dev/accounts/[account]/settings/access-tokens).
2. In your GitHub repo: **Settings** → **Secrets and variables** → **Actions** → **New repository secret**.
3. Name: `EXPO_TOKEN`, Value: your Expo token.

## Project structure

```
app/                 # Expo Router app entry and tabs
  (tabs)/            # Home, Table, Results, Fixtures, Settings
  docs/              # index.html, privacy-policy (web-viewable docs)
components/          # TeamBadge, ScheduleMatchList
lib/                 # badges, cache, scraper, CrestContext, useDelayedError
assets/              # App icon, splash; crests come from GotSport (cached)
patches/             # Gradle/build fixes (expo-font, expo-asset)
scripts/             # apply-expo-gradle-fix.js, etc.
android/             # Native Android project (generated by prebuild / EAS)
ios/                 # Native iOS project (generated by prebuild / EAS)
```

## License

Private. Not an official St Albans City FC or GotSport product.
